# Architecture Alignment Checklist

- [x] Define JSON-backed Config schema and validation
- [x] Replace BaseSettings usage with Config accessors
- [x] Update default storage paths (`.chaos/db/chroma`, `.chaos/db/raw.sqlite`)
- [x] Adjust CLI/test fixtures to new config paths
- [x] Extend Identity schema with required fields (schema_version, loop_definition, memory config, tuning policy)
- [x] Implement agent_id derivation from identity file name
- [x] Enforce identity version compatibility on load
- [x] Update subconscious identity loading to standard path
- [x] Implement idetic event schema and raw event store (SQLite)
- [x] Build LTM vector store wired 1:1 to idetic events
- [x] Implement STM per loop with loop_id tracking
- [x] Add persona-specific memory access controls
- [x] Update agent flows to emit idetic events + loop_id
- [x] Add BaseTool type/schema/call contract
- [x] Split tools into one-class-per-file modules
- [x] Refactor ToolLibrary to expose schemas/types
- [x] Remove hardcoded tool schemas in BasicAgent
- [x] Integrate tool manifest access control in agent/tool selection
- [x] Separate knowledge storage path/collections from memory
- [x] Enforce identity-level access rules for skills/knowledge
- [x] Update agent flow to refresh identity per loop definition
- [x] Update unit tests for new config/identity/memory behavior
- [x] Update functional tests for new storage paths and memory behavior
- [x] Fill knowledge/skills coverage gaps
